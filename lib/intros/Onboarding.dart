import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/flutter_svg.dart';
import 'package:tweak/intros/sign_in.dart';
import 'package:tweak/intros/start.dart';

class Onboarding extends StatefulWidget {

  final String title;
  final String imgSrc;
  final String dis;
  final int num;
  Onboarding({
    Key key,
    this.title,
    this.imgSrc,
    this.dis,
    this.num,
  }) : super(key: key);

  @override
  _OnboardingState createState() => _OnboardingState();
}

class _OnboardingState extends State<Onboarding> {
  @override
  Widget build(BuildContext context) {

    Size size = MediaQuery.of(context).size;

    return Scaffold(
      backgroundColor: Colors.white,
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.end,
          crossAxisAlignment: CrossAxisAlignment.center,
          children: <Widget>[
            Image.asset(
              widget.imgSrc,
              width: size.width*(1-widget.num*0.03),
              fit: BoxFit.fitWidth,
            ),
            SizedBox(height: size.height*0.07),
            SizedBox(
              width: 355.0,
              height: 72.0,
              child: Text(
                widget.title,
                style: TextStyle(
                  fontFamily: 'Metropolis-ExtraBold',
                  fontSize: 30,
                  color: const Color(0xff040415),
                  height: 1,
                ),
                textAlign: TextAlign.center,
              ),
            ),
            SizedBox(
              width: 293.0,
              height: 60.0,
              child: Text(
                widget.dis,
                style: TextStyle(
                  fontFamily: 'Metropolis-Regular',
                  fontSize: 13,
                  color: const Color(0x80040415),
                  height: 1.5384615384615385,
                ),
                textAlign: TextAlign.center,
              ),
            ),
            SizedBox(height: size.height*0.02),
            new InkWell(
              onTap: () {
                Navigator.push(
                    context, SlideRightRoute(
                  page: widget.num<3 ? Start(widget.num+1):SignIn(),
                )
                );
              },
              child: new Container(
                width: size.width*0.8,
                height: size.height*0.08,
                decoration: new BoxDecoration(
                  color: Colors.black,
                  borderRadius: new BorderRadius.circular(15.0),
                ),
                child: new Center(
                  child: new Text(
                    'Letâ€™s Tweak',
                    style: TextStyle(
                      fontFamily: 'Metropolis-Bold',
                      fontSize: 15,
                      color: const Color(0xffffffff),
                      height: 1,
                    ),
                    textAlign: TextAlign.center,
                  ),
                ),
              ),
            ),
            SizedBox(height: size.height*0.01,),
            Row(
              mainAxisAlignment: MainAxisAlignment.center,
              children: <Widget>[
                Circle(widget.num==0 ? true: false),
                SizedBox(width: 5,),
                Circle(widget.num==1 ? true: false),
                SizedBox(width: 5,),
                Circle(widget.num==2 ? true: false),
                SizedBox(width: 5,),
                Circle(widget.num==3 ? true: false),
              ],
            ),
            SizedBox(height: size.height*0.02),
            SvgPicture.string(
              _svg_ep1byi,
              allowDrawingOutsideViewBox: true,
            ),
            SizedBox(height: size.height*0.04),
          ],
        ),
      ),
    );
  }
}

const String _svg_ep1byi =
    '<svg viewBox="127.5 745.5 104.7 20.0" ><path transform="translate(127.5, 745.5)" d="M 92.9114990234375 19.99979972839355 L 92.9114990234375 4.444200038909912 L 94.84470367431641 4.444200038909912 L 94.84470367431641 6.355800151824951 C 95.79959869384766 4.888800144195557 97.20000457763672 4.155300140380859 99.04410552978516 4.155300140380859 C 100.6002044677734 4.155300140380859 101.93310546875 4.733099937438965 103.022102355957 5.867100238800049 C 104.1110992431641 7.000200271606445 104.6664047241211 8.378100395202637 104.6664047241211 9.999899864196777 C 104.6664047241211 11.62260055541992 104.1110992431641 13.0221004486084 103.022102355957 14.15520000457764 C 101.93310546875 15.28920078277588 100.6002044677734 15.84450054168701 99.04410552978516 15.84450054168701 C 97.20000457763672 15.84450054168701 95.79959869384766 15.11100006103516 94.84470367431641 13.64400005340576 L 94.84470367431641 19.99979972839355 L 92.9114990234375 19.99979972839355 Z M 78.84450531005859 19.99979972839355 L 78.84450531005859 4.444200038909912 L 80.77770233154297 4.444200038909912 L 80.77770233154297 6.355800151824951 C 81.73350524902344 4.888800144195557 83.13300323486328 4.155300140380859 84.97800445556641 4.155300140380859 C 86.533203125 4.155300140380859 87.86700439453125 4.733099937438965 88.95510101318359 5.867100238800049 C 90.04410552978516 7.000200271606445 90.60030364990234 8.378100395202637 90.60030364990234 9.999899864196777 C 90.60030364990234 11.62260055541992 90.04410552978516 13.0221004486084 88.95510101318359 14.15520000457764 C 87.86700439453125 15.28920078277588 86.533203125 15.84450054168701 84.97800445556641 15.84450054168701 C 83.13300323486328 15.84450054168701 81.73350524902344 15.11100006103516 80.77770233154297 13.64400005340576 L 80.77770233154297 19.99979972839355 L 78.84450531005859 19.99979972839355 Z M 65.79990386962891 14.15520000457764 C 64.71089935302734 13.0221004486084 64.15560150146484 11.62260055541992 64.15560150146484 9.999899864196777 C 64.15560150146484 8.378100395202637 64.71089935302734 7.000200271606445 65.79990386962891 5.867100238800049 C 66.88890075683594 4.733099937438965 68.2218017578125 4.155300140380859 69.77790069580078 4.155300140380859 C 71.62200164794922 4.155300140380859 73.02239990234375 4.888800144195557 73.97820281982422 6.355800151824951 L 73.97820281982422 4.444200038909912 L 75.91139984130859 4.444200038909912 L 75.91139984130859 15.5556001663208 L 73.97820281982422 15.5556001663208 L 73.97820281982422 13.64400005340576 C 73.02239990234375 15.11100006103516 71.62200164794922 15.84450054168701 69.77790069580078 15.84450054168701 C 68.2218017578125 15.84450054168701 66.88890075683594 15.28920078277588 65.79990386962891 14.15520000457764 Z M 40.53330230712891 14.15520000457764 C 39.44430160522461 13.0221004486084 38.88899993896484 11.62260055541992 38.88899993896484 9.999899864196777 C 38.88899993896484 8.378100395202637 39.44430160522461 7.000200271606445 40.53330230712891 5.867100238800049 C 41.62229919433594 4.733099937438965 42.9552001953125 4.155300140380859 44.51130294799805 4.155300140380859 C 46.35540008544922 4.155300140380859 47.75580215454102 4.888800144195557 48.71070098876953 6.355800151824951 L 48.71070098876953 4.444200038909912 L 50.64480209350586 4.444200038909912 L 50.64480209350586 15.5556001663208 L 48.71070098876953 15.5556001663208 L 48.71070098876953 13.64400005340576 C 47.75580215454102 15.11100006103516 46.35540008544922 15.84450054168701 44.51130294799805 15.84450054168701 C 42.9552001953125 15.84450054168701 41.62229919433594 15.28920078277588 40.53330230712891 14.15520000457764 Z M 27.57780075073242 14.20020008087158 C 26.48880004882813 13.08870029449463 25.93350028991699 11.68920040130615 25.93350028991699 9.999899864196777 C 25.93350028991699 8.333100318908691 26.46630096435547 6.933599948883057 27.55529975891113 5.822100162506104 C 28.64430046081543 4.71150016784668 30.04470062255859 4.155300140380859 31.75559997558594 4.155300140380859 C 33.37739944458008 4.155300140380859 34.71120071411133 4.733099937438965 35.73360061645508 5.888700008392334 C 36.7775993347168 7.02180004119873 37.28879928588867 8.399700164794922 37.28879928588867 10.02239990234375 C 37.28879928588867 10.31130027770996 37.26630020141602 10.60020065307617 37.22220230102539 10.88910007476807 L 27.91080093383789 10.88910007476807 C 28.2888011932373 12.86640071868896 29.82240104675293 14.02200031280518 31.93290138244629 14.02200031280518 C 33.39990234375 14.02200031280518 34.46640014648438 13.48920059204102 35.13330078125 12.40019989013672 L 36.7775993347168 13.33349990844727 C 35.68860244750977 15.00030040740967 34.06679916381836 15.84450054168701 31.88880157470703 15.84450054168701 C 30.13290023803711 15.84450054168701 28.68930053710938 15.28920078277588 27.57780075073242 14.20020008087158 Z M 2.199599981307983 12.33360004425049 L 2.199599981307983 6.310800075531006 L 0 6.310800075531006 L 0 4.444200038909912 L 2.199599981307983 4.444200038909912 L 2.199599981307983 1.910700082778931 L 4.133699893951416 1.332900047302246 L 4.133699893951416 4.444200038909912 L 7.089300155639648 4.444200038909912 L 7.089300155639648 6.310800075531006 L 4.133699893951416 6.310800075531006 L 4.133699893951416 12.33360004425049 C 4.133699893951416 14.04450035095215 5.111100196838379 13.91130065917969 7.089300155639648 13.82220077514648 L 7.089300155639648 15.5556001663208 C 6.550877094268799 15.6264533996582 6.060036182403564 15.66285991668701 5.615026473999023 15.66285133361816 C 3.26760458946228 15.66280651092529 2.199599981307983 14.6494722366333 2.199599981307983 12.33360004425049 Z M 60.57810211181641 15.5556001663208 L 55.51110076904297 10.28880023956299 L 55.51110076904297 15.5556001663208 L 53.57789993286133 15.5556001663208 L 53.57789993286133 0 L 55.51110076904297 0 L 55.51110076904297 9.355500221252441 L 60.3108024597168 4.444200038909912 L 62.80020141601563 4.444200038909912 L 57.48929977416992 9.822600364685059 L 62.97750091552734 15.5556001663208 L 60.57810211181641 15.5556001663208 Z M 19.13310050964355 15.5556001663208 L 16.53300094604492 7.333199977874756 L 13.93290042877197 15.5556001663208 L 11.95560073852539 15.5556001663208 L 8.511300086975098 4.444200038909912 L 10.53359985351563 4.444200038909912 L 12.97800064086914 12.88890075683594 L 15.59969997406006 4.444200038909912 L 17.46630096435547 4.444200038909912 L 20.08889961242676 12.91139984130859 L 22.53330039978027 4.444200038909912 L 24.55560111999512 4.444200038909912 L 21.11130142211914 15.5556001663208 L 19.13310050964355 15.5556001663208 Z" fill="#202020" stroke="none" stroke-width="1" stroke-miterlimit="10" stroke-linecap="butt" /></svg>';

class Circle extends StatelessWidget {

  final bool filled;

  Circle(this.filled);

  @override
  Widget build(BuildContext context) {
    return Container(
      width: 10,
      height: 10,
      decoration: BoxDecoration(
          shape: BoxShape.circle,
          color: filled ? Colors.black : Colors.white,
          border: Border.all(
            width: 1,
            color: Colors.black,
          )
      ),
    );
  }
}

class SlideRightRoute extends PageRouteBuilder {
  final Widget page;
  SlideRightRoute({this.page})
      : super(
    pageBuilder: (
        BuildContext context,
        Animation<double> animation,
        Animation<double> secondaryAnimation,
        ) =>
    page,
    transitionsBuilder: (
        BuildContext context,
        Animation<double> animation,
        Animation<double> secondaryAnimation,
        Widget child,
        ) =>
        SlideTransition(
          position: Tween<Offset>(
            begin: const Offset(1, 0),
            end: Offset.zero,
          ).animate(animation),
          child: child,
        ),
  );
}